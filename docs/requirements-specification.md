# AI 반려로봇 웹앱 - 요구사항 명세서

> **프로젝트**: AI 반려로봇 관리 시스템  
> **개발 기간**: 3 ~ 3.5주  
> **기술 스택**: Spring Boot (Backend) + React.js (Frontend)  
> **작성일**: 2026-01-15

---

## 1. 시스템 개요

### 1.1 목적
독거노인의 일상을 돌보는 AI 반려로봇의 데이터를 수집하고, 보호자/복지사가 원격으로 모니터링할 수 있는 웹 애플리케이션 제공

### 1.2 사용자
| 사용자 | 설명 |
|--------|------|
| **사용자 (보호자/복지사)** | 노인의 상태를 모니터링하고 일정/약을 관리하는 사람. 동일한 기능 사용 |

### 1.3 시스템 구성도
```
┌─────────────┐  REST + WebSocket  ┌─────────────────┐  REST + WebSocket  ┌─────────────┐
│   AI 로봇   │ ◀────────────────▶ │  Spring Boot    │ ◀────────────────▶ │  React.js   │
│  (임베디드)  │                    │    Server       │                    │   Client    │
└─────────────┘                    └────────┬────────┘                    └─────────────┘
                                            │
                                            ▼
                                      ┌───────────┐
                                      │    DB     │
                                      └───────────┘
```

### 1.4 통신 방식
| 대상 | 프로토콜 | 용도 |
|------|----------|------|
| 로봇 ↔ 서버 | REST API | 초기 데이터 조회, 설정 변경, 정기 상태 보고 |
| 로봇 ↔ 서버 | WebSocket | 실시간 이벤트 (비상, 약복용, 기상 등) |
| 클라이언트 ↔ 서버 | REST API | 초기 데이터 로드, CRUD 작업 |
| 클라이언트 ↔ 서버 | WebSocket | 대시보드 실시간 업데이트 |

---

## 2. 기능적 요구사항

### 2.1 인증/계정 관리

| ID | 요구사항 | 우선순위 | 설명 |
|----|----------|----------|------|
| AUTH-01 | 회원가입 | 필수 | 이메일, 비밀번호, 이름, 연락처 입력 |
| AUTH-02 | 로그인 | 필수 | 이메일 + 비밀번호 기반 JWT 인증 |
| AUTH-03 | 로그아웃 | 필수 | JWT 토큰 무효화 |
| AUTH-04 | 비밀번호 재설정 | 선택 | 이메일 인증 후 재설정 |
| AUTH-05 | 프로필 수정 | 선택 | 이름, 연락처, 알림 설정 변경 |

---

### 2.2 노인 관리

| ID | 요구사항 | 우선순위 | 설명 |
|----|----------|----------|------|
| ELDER-01 | 노인 등록 | 필수 | 이름, 생년월일, 주소, 건강정보(보유질환), 로봇 연결 |
| ELDER-02 | 노인 목록 조회 | 필수 | 담당 노인 목록 표시 (복지사는 다수) |
| ELDER-03 | 노인 상세 조회 | 필수 | 특정 노인의 상세 정보 및 현재 상태 |
| ELDER-04 | 노인 정보 수정 | 필수 | 건강정보, 연락처 등 수정 |
| ELDER-05 | 노인 삭제/비활성화 | 선택 | 담당 해제 또는 비활성화 |

---

### 2.3 대시보드

| ID | 요구사항 | 우선순위 | 설명 |
|----|----------|----------|------|
| DASH-01 | 오늘의 요약 | 필수 | 기상시간, 약 복용 현황, 외출 여부 한눈에 표시 |
| DASH-02 | 최근 알림 | 필수 | 비상 상황, 약 복용 누락, 일정 알림 등 |
| DASH-03 | 주간 캘린더 | 필수 | 이번 주 일정 표시 |
| DASH-04 | 건강 트렌드 | 선택 | 약 복용률, 활동량 추이 그래프 |
| DASH-05 | 로봇 상태 | 필수 | 배터리 잔량, 연결 상태 (실시간) |
| DASH-06 | 실시간 업데이트 | 필수 | WebSocket을 통한 이벤트 실시간 반영 |

#### 대시보드 데이터 로딩 방식
| 단계 | 방식 | 설명 |
|------|------|------|
| 초기 로드 | REST API | 페이지 접속 시 현재 상태 전체 조회 |
| 이후 업데이트 | WebSocket | 변경 이벤트만 실시간 수신 및 UI 반영 |

---

### 2.4 일정 관리

| ID | 요구사항 | 우선순위 | 설명 |
|----|----------|----------|------|
| SCHED-01 | 일정 등록 | 필수 | 병원, 외출, 기타 일정 등록 |
| SCHED-02 | 일정 목록 조회 | 필수 | 캘린더 또는 리스트 형태로 조회 |
| SCHED-03 | 일정 상세 조회 | 필수 | 일정 상세 정보 (장소, 준비물 등) |
| SCHED-04 | 일정 수정/삭제 | 필수 | 일정 변경 및 삭제 |
| SCHED-05 | 일정 알림 설정 | 필수 | 알림 시간 설정 (예: 2시간 전) |

---

### 2.5 약 복용 관리

| ID | 요구사항 | 우선순위 | 설명 |
|----|----------|----------|------|
| MED-01 | 약 정보 등록 | 필수 | 약 이름, 복용 시간(아침/저녁), 용량 |
| MED-02 | 복용 기록 조회 | 필수 | 날짜별 복용 여부 확인 |
| MED-03 | 복용 현황 대시보드 | 필수 | 이번 주 복용률, 누락 현황 |
| MED-04 | 복용 알림 설정 | 선택 | 누락 시 보호자에게 알림 |
| MED-05 | 약 정보 수정/삭제 | 필수 | 약 정보 변경 |

---

### 2.6 알림 시스템

| ID | 요구사항 | 우선순위 | 설명 |
|----|----------|----------|------|
| NOTI-01 | 알림 목록 조회 | 필수 | 전체 알림 히스토리 |
| NOTI-02 | 알림 읽음 처리 | 필수 | 개별/전체 읽음 처리 |
| NOTI-03 | 웹 푸시 알림 | 필수 | 브라우저 푸시 알림 |
| NOTI-04 | 이메일 알림 | 선택 | 비상 상황 시 이메일 발송 |
| NOTI-05 | 알림 설정 | 필수 | 알림 유형별 ON/OFF 설정 |

#### 알림 유형
| 유형 | 설명 | 우선순위 |
|------|------|----------|
| 비상 | 낙상 감지, SOS 호출 등 | 최상 (즉시 알림) |
| 약 복용 누락 | 복용 시간 초과 | 높음 |
| 일정 알림 | 병원 예약 등 | 보통 |
| 일상 정보 | 기상, 외출, 귀가 | 낮음 |
| 치매 의심 | 대화 분석 결과 이상 감지 | 높음 |

---

### 2.7 활동 로그/모니터링

| ID | 요구사항 | 우선순위 | 설명 |
|----|----------|----------|------|
| LOG-01 | 일일 활동 로그 | 필수 | 기상, 식사, 외출, 귀가, 취침 등 타임라인 |
| LOG-02 | 날짜별 로그 조회 | 필수 | 과거 날짜 활동 기록 조회 |
| LOG-03 | 대화 요약 | 선택 | 로봇과의 대화 요약 (건강 상태 등) |
| LOG-04 | 안전 점검 로그 | 선택 | 가스밸브, 창문, 멀티탭 점검 기록 |

---

### 2.8 로봇 연동 API (로봇 ↔ 서버)

#### 로봇 → 서버
| ID | 요구사항 | 우선순위 | 프로토콜 | 설명 |
|----|----------|----------|----------|------|
| API-01 | 활동 이벤트 전송 | 필수 | WebSocket | 기상, 외출, 귀가 등 이벤트 |
| API-02 | 약 복용 결과 전송 | 필수 | WebSocket | 복용 완료/누락 정보 |
| API-03 | 비상 상황 전송 | 필수 | WebSocket | SOS, 낙상 감지 등 |
| API-04 | Heartbeat 전송 | 필수 | REST API | 60초 주기 상태 보고 |
| API-05 | 대화 분석 결과 전송 | 선택 | WebSocket | 치매 의심 정보 등 |

#### 서버 → 로봇
| ID | 요구사항 | 우선순위 | 프로토콜 | 설명 |
|----|----------|----------|----------|------|
| API-06 | 일정 동기화 | 필수 | REST API | 일정 변경 시 로봇에 전달 |
| API-07 | 약 정보 동기화 | 필수 | REST API | 약 정보 변경 시 로봇에 전달 |
| API-08 | 로봇 설정 변경 | 필수 | REST API | 알림 시간, 볼륨 등 설정 변경 |

---

### 2.9 로봇 설정 관리

| ID | 요구사항 | 우선순위 | 설명 |
|----|----------|----------|------|
| ROBOT-01 | 알림 시간 설정 | 필수 | 아침/저녁 약 알림 시간 |
| ROBOT-02 | 일정 알림 타이밍 | 필수 | 일정 몇 시간 전 알림 |
| ROBOT-03 | 음성 볼륨 | 필수 | TTS 볼륨 조절 |
| ROBOT-04 | 긴급 연락처 | 필수 | 비상시 연락할 번호 |
| ROBOT-05 | 순찰 스케줄 | 선택 | 순찰 시간대, 빈도 |

---

## 3. 비기능적 요구사항

### 3.1 성능

| ID | 요구사항 | 목표치 |
|----|----------|--------|
| NFR-01 | API 응답 시간 | 95% 요청 500ms 이내 |
| NFR-02 | 동시 접속자 | 최소 100명 |

### 3.2 보안

| ID | 요구사항 | 설명 |
|----|----------|------|
| NFR-03 | 비밀번호 암호화 | BCrypt 해싱 |
| NFR-04 | JWT 인증 | Access Token + Refresh Token |
| NFR-05 | HTTPS | 프로덕션 환경 SSL 적용 |
| NFR-06 | 다중 디바이스 로그인 | 허용 (동시 로그인 OK) |

### 3.3 데이터

| ID | 요구사항 | 설명 |
|----|----------|------|
| NFR-07 | 데이터 보관 | 기본 3년, 영상/이미지 90일 |
| NFR-08 | 백업 | 일 1회 자동 백업 (추후 구현) |

### 3.4 호환성

| ID | 요구사항 | 설명 |
|----|----------|------|
| NFR-09 | 브라우저 | Chrome, Safari, Edge 최신 버전 |
| NFR-10 | 반응형 | 데스크톱, 태블릿, 모바일 지원 |
| NFR-11 | 언어 | 한국어만 지원 |

### 3.5 로봇 연결 관리

| ID | 요구사항 | 설명 | 근거 |
|----|----------|------|------|
| NFR-12 | Heartbeat 주기 | 60초 | MQTT/AWS IoT 권장 기준 |
| NFR-13 | 오프라인 판정 | 2분 (Heartbeat 2회 미수신) | - |
| NFR-14 | 대시보드 경고 | 5분 후 "연결 끊김" 표시 | 일시적 네트워크 오류 대응 |
| NFR-15 | 오프라인 알림 | 30분 후 보호자 푸시 알림 | 보건복지부 독거노인 돌봄 가이드라인 |

---

## 4. 데이터 모델 (초안)

### 4.1 주요 엔티티

```
User (사용자)
├── id, email, password, name, phone, createdAt

Elder (노인)
├── id, name, birthDate, address, healthInfo, robotId, createdAt

UserElder (사용자-노인 연결)
├── userId, elderId, createdAt

Schedule (일정)
├── id, elderId, title, datetime, location, memo, alertBefore

Medication (약 정보)
├── id, elderId, name, dosageTime (MORNING/EVENING), dose

MedicationLog (복용 기록)
├── id, medicationId, date, taken (boolean), takenAt

ActivityLog (활동 로그)
├── id, elderId, type, datetime, details

Notification (알림)
├── id, userId, type, title, message, isRead, createdAt

Robot (로봇)
├── id, serialNumber, elderId, status, battery, lastConnected
```

---

## 5. 화면 목록 (React.js)

| 화면 | 경로 | 설명 |
|------|------|------|
| 로그인 | `/login` | 이메일/비밀번호 로그인 |
| 회원가입 | `/signup` | 신규 사용자 등록 |
| 대시보드 | `/dashboard` | 메인 화면, 오늘의 요약 |
| 노인 목록 | `/elders` | 담당 노인 목록 |
| 노인 상세 | `/elders/:id` | 특정 노인 상세 정보 |
| 일정 관리 | `/elders/:id/schedules` | 일정 캘린더/리스트 |
| 약 관리 | `/elders/:id/medications` | 약 정보 및 복용 기록 |
| 활동 로그 | `/elders/:id/logs` | 일일 활동 타임라인 |
| 알림 | `/notifications` | 알림 목록 |
| 설정 | `/settings` | 프로필, 알림 설정 |

---

## 6. 개발 우선순위 (3주 기준)

### Week 1: 핵심 기능
- [ ] 인증 (회원가입, 로그인, JWT)
- [ ] 노인 CRUD
- [ ] 대시보드 기본 구조

### Week 2: 주요 기능
- [ ] 일정 관리 CRUD
- [ ] 약 복용 관리
- [ ] 활동 로그 조회
- [ ] 로봇 연동 API

### Week 3: 알림 및 마무리
- [ ] 알림 시스템 (웹 푸시)
- [ ] UI/UX 개선
- [ ] 테스트 및 버그 수정

---

## 7. 결정 사항

> 논의를 통해 결정된 사항입니다.

| 항목 | 결정 | 비고 |
|------|------|------|
| 노인:로봇 관계 | 1:1 고정 | - |
| 통신 프로토콜 | REST + WebSocket 혼합 | 초기 로드/CRUD는 REST, 실시간 이벤트는 WebSocket |
| 영상/이미지 | 스냅샷만 (MVP) | 실시간 스트리밍은 추후 검토 |
| 언어 지원 | 한국어만 | - |
| 로봇 설정 | 웹앱에서 변경 가능 | 알림 시간, 볼륨, 긴급 연락처 등 |
| 다중 디바이스 | 허용 | 동시 로그인 OK |
| Heartbeat | 60초 | MQTT/AWS IoT 권장 기준 |
| 오프라인 알림 | 30분 후 | 보건복지부 독거노인 돌봄 가이드라인 |

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 0.1 | 2026-01-15 | 초안 작성 |
| 0.2 | 2026-01-15 | 결정 사항 반영 (통신 방식, 로봇 설정, Heartbeat, 오프라인 알림 등) |
